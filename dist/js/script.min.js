angular.module('sloanApp', [
    'ngRoute', 
    'ngAnimate', 
    'appRoutes', 
    'app.factories', 
    'MainCtrl', 
    'HomeCtrl', 
    'PortfolioCtrl', 
    'ExperienceCtrl',
    'ContactCtrl'
  ]);
angular.module('appRoutes', []).config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {

    $routeProvider

        .when('/', {
            title: 'Home',
            templateUrl: '/templates/home/home.view.html',
            controller: 'HomeController'
        })

        .when('/home', {
            redirectTo: '/'
        })

        .when('/portfolio', {
            title: 'Portfolio',
            templateUrl: '/templates/portfolio/portfolio.view.html',
            controller: 'PortfolioController'
        })

        .when('/experience', {
            title: 'Experience',
            templateUrl: '/templates/experience/experience.view.html',
            controller: 'ExperienceController'
        })

        .when('/contact', {
            title: 'Contact',
            templateUrl: '/templates/contact/contact.view.html',
            controller: 'ContactController'
        });

        // .otherwise({
        //     templateUrl:'errors/404.view.jade'
        // });


    $locationProvider.html5Mode({
        enabled: true,
        requireBase: false
    });

}]);
angular.module('ContactCtrl', []).controller('ContactController', function($scope) {

  $scope.title = 'Contact Me';

});
angular.module('ExperienceCtrl', []).controller('ExperienceController', function($scope, $http) {

  $scope.title = 'Experience';

  $http.get('api/experience')
    .success(function (res) {
      $scope.experience = res;
    });
});
angular.module('HomeCtrl', []).controller('HomeController', function($scope) {

  $scope.title = 'Home';

});
angular.module('PortfolioCtrl', []).controller('PortfolioController', function($scope, $http) {

  $scope.title = 'Portfolio';

  $scope.view = 'thumb';
  $scope.toggleView = function(item) {
    if(item !== $scope.view) {
      $scope.view = $scope.view === 'thumb' ? 'list': 'thumb';
    }
  };

  $http.get('api/portfolio')
    .success(function (res) {
      $scope.portfolioList = res;
    });
});

angular.module('MainCtrl', []).controller('MainController', function($scope, $http) {

  $scope.tagline = 'main';  

  $http.get('api/navigation')
    .success(function (res) {
      $scope.navigation = res
    });

  $scope.$on('$routeChangeSuccess', function (event, data) {
    $scope.errormessage = '';
    $scope.pageTitle = data.title + ' | Matt Sloan | UI Designer &amp; Full-Stack Developer';
  });

});
(function() {
  'use strict';

  angular
    .module('app.factories', ['ngResource'])
    ;
})();

(function() {
  'use strict';

  angular
    .module('app.factories')
    .factory('NavigationResource', navigationResource)
  ;

  /* @ngInject */
  function navigationResource($resource) {
    var uri = '/api/navigation/';
    var timeout = 1000;
    console.log('return navigation api');
    //return $resource(uri, {ps: 'display'});
  }
})();
